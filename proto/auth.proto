syntax = "proto3";

option optimize_for = LITE_RUNTIME;

package proto;

enum AuthMethod
{
    AUTH_UNKNOWN = 0;

    // Без запроса учетных данных
    AUTH_NONE = 1;

    // Средставами протокола (имя пользователя, пароль)
    AUTH_BASIC = 2;
}

//
// Отправляется только от сервера к клиенту
//
message AuthRequest
{
    //
    // Маска методов авторизации, которые поддерживает сервер (или которые включены на сервере).
    //
    int32 methods = 1;
}

//
// Отправляется только от клиента к серверу
//
message AuthReply
{
    //
    // Метод с помощью которого производится авторизация.
    // Если сервер поддерживает метод NO_AUTH (без авторизации), то в сообщении используется
    // только это поле, все остальные игнорируются.
    //
    int32 method = 1;

    // Имя пользователя
    string username = 3;

    // Пароль зашифрованный алгоритмом DES
    bytes password = 4;
}

//
// Возможности сессии
//
enum SessionFeature
{
    FEATURE_NONE           = 0;    // Нет разрешенных возможностей
    FEATURE_DESKTOP_MANAGE = 1;    // Управление рабочим столом
    FEATURE_DESKTOP_VIEW   = 2;    // Просмотр рабочего стола
    FEATURE_DESKTOP_AUDIO  = 4;    // Воспроизведение звука
    FEATURE_POWER_MANAGE   = 8;    // Управление питанием
    FEATURE_CLIPBOARD      = 16;   // Управление буфером обмена
    FEATURE_FILE_TRANSFER  = 32;   // Передача файлов
    FEATURE_BELL           = 64;   // Звуковой вызов
    FEATURE_TEXT_CHAT      = 128;  // Текстовый чат
    FEATURE_TEXT_MESSAGE   = 256;  // Текстовое сообщение
    FEATURE_AUDIO_CHAT     = 512;  // Аудио чат
    FEATURE_REMOTE_UPDATE  = 1024; // Удаленное обновление сервера
    FEATURE_SYSTEM_INFO    = 2048; // Получение информации о системе
    FEATURE_SYSTEM_MANAGE  = 4096; // Управление параметрами системы
}

//
// Отправляется только от сервера к клиенту
//
message AuthResult
{
    //
    // Если авторизация прошла успешно, то поле имеет значение true,
    // если нет, то false.
    //
    bool success = 1;

    //
    // Маска разрешений, которые применимы для данноЙ авторизации.
    // Если авторизация не пройдена, то данное после отсутствует.
    //
    int32 features = 2;
}
